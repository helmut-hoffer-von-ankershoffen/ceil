---
- hosts: all

  connection: local

  tasks:
    - name: Add mappings to /etc/hosts
      tags:
        - hosts
      become: true
      blockinfile:
        path: /etc/hosts
        block: |
          {{ item.ip }} {{ item.name }}
        marker: "# {mark} max {{ item.name }}"
      with_items:
        - { name: max-one, ip: 192.168.0.111 }
        - { name: max-one.local, ip: 192.168.0.111 }
        - { name: max-two, ip: 12.0.0.102 }
        - { name: max-two.local, ip: 12.0.0.102 }
        - { name: max-three, ip: 12.0.0.103 }
        - { name: max-three.local, ip: 12.0.0.103 }
        - { name: httpd.max.local, ip: 12.0.0.201 }
        - { name: traefik-ui.max.local, ip: 12.0.0.201 }
        - { name: prometheus.max.local, ip: 12.0.0.201 }
        - { name: alertmanager.max.local, ip: 12.0.0.201 }
        - { name: pushgateway.max.local, ip: 12.0.0.201 }
        - { name: grafana.max.local, ip: 12.0.0.201 }
